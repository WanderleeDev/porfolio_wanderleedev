---
import { getTranslations } from "../i18n/utils";

const lang = Astro.currentLocale as "es" | "en";
const t = getTranslations(lang);
const formT = t("form");

const formId = import.meta.env.FORMSPREE_FORM_ID;
const endpoint = `https://formspree.io/f/${formId}`;
---

<div
  class="form-glass-card relative overflow-hidden bg-white/3 backdrop-blur-xl border border-white/10 rounded-3xl p-10 md:p-8 lg:p-10 shadow-lg"
>
  <form
    id="contact-form"
    class="space-y-6"
    method="POST"
    action={endpoint}
    target="_self"
  >
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <label class="flex flex-col">
        <span class="text-sm font-medium mb-2 text-neutral-200"
          >{formT.name.label}</span
        >
        <input
          name="name"
          type="text"
          required
          class="px-4 py-3 rounded-lg border border-white/10 bg-white/5 backdrop-blur-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 duration-300"
          placeholder={formT.name.placeholder}
        />
      </label>

      <label class="flex flex-col">
        <span class="text-sm font-medium mb-2 text-neutral-200"
          >{formT.email.label}</span
        >
        <input
          name="email"
          type="email"
          required
          class="px-4 py-3 rounded-lg border border-white/10 bg-white/5 backdrop-blur-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 duration-300"
          placeholder={formT.email.placeholder}
        />
      </label>
    </div>

    <label class="flex flex-col">
      <span class="text-sm font-medium mb-2 text-neutral-200"
        >{formT.subject.label}</span
      >
      <input
        name="subject"
        type="text"
        class="px-4 py-3 rounded-lg border border-white/10 bg-white/5 backdrop-blur-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 duration-300"
        placeholder={formT.subject.placeholder}
      />
    </label>

    <label class="flex flex-col">
      <span class="text-sm font-medium mb-2 text-neutral-200"
        >{formT.message.label}</span
      >
      <textarea
        name="message"
        rows="6"
        required
        class="px-4 py-3 rounded-lg border border-white/10 bg-white/5 backdrop-blur-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 duration-300 resize-none"
        placeholder={formT.message.placeholder}></textarea>
    </label>

    <div class="flex items-center gap-4">
      <button
        type="submit"
        class="px-8 py-3 rounded-xl text-white font-medium gradient"
      >
        {formT.submit}
      </button>
      <p id="form-status" class="text-sm text-gray-300"></p>
    </div>
  </form>
</div>

<style>
  .form-glass-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(99, 102, 241, 0.5),
      rgba(168, 85, 247, 0.5),
      transparent
    );
  }

  .gradient {
    background-image:
      radial-gradient(
        ellipse at 20% 30%,
        rgba(56, 189, 248, 0.85) 0%,
        transparent 100%
      ),
      radial-gradient(
        ellipse at 80% 70%,
        rgba(139, 92, 246, 0.75) 0%,
        transparent 100%
      ),
      radial-gradient(
        ellipse at 60% 20%,
        rgba(236, 72, 153, 0.7) 0%,
        transparent 100%
      ),
      radial-gradient(
        ellipse at 40% 80%,
        rgba(34, 197, 94, 0.65) 0%,
        transparent 100%
      );
  }

  @media (max-width: 1024px) {
    .form-glass-card {
      padding: 1.5rem;
    }
  }

  @media (max-width: 768px) {
    .form-glass-card {
      padding: 1.25rem;
      border-radius: 1.5rem;
    }
  }
</style>
